@import "tailwindcss";
@import "../../../../packages/core/src/tokens/tokens.css";

/* Base Button Styles */
.md-button {
  @apply relative inline-flex items-center justify-center gap-2;
  @apply font-medium border-none outline-none cursor-pointer;
  transition: all var(--duration-medium-1) var(--easing-standard);
  font-family: var(--font-family-plain);
}

.md-button:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.md-button:disabled {
  @apply cursor-not-allowed;
  opacity: var(--state-disabled-opacity);
}

/* ===========================================
   SIZE VARIANTS
   Based on Material Design 3 specifications:
   - Small: 32dp height, 12dp horizontal padding
   - Medium: 40dp height, 24dp horizontal padding (default)
   - Large: 48dp height, 32dp horizontal padding
   =========================================== */

/* Small Size */
.md-button--small {
  @apply h-8 px-3 text-xs rounded-full;
  min-width: 64px;
}

.md-button--small .md-button__icon {
  @apply w-4 h-4;
}

.md-button--small .md-button__icon ::slotted(svg),
.md-button--small .md-button__icon ::slotted(img) {
  width: 16px;
  height: 16px;
}

/* Medium Size (Default) */
.md-button--medium {
  @apply h-10 px-6 text-sm rounded-full;
  min-width: 88px;
}

.md-button--medium .md-button__icon {
  @apply w-5 h-5;
}

.md-button--medium .md-button__icon ::slotted(svg),
.md-button--medium .md-button__icon ::slotted(img) {
  width: var(--size-icon-sm);
  height: var(--size-icon-sm);
}

/* Large Size */
.md-button--large {
  @apply h-12 px-8 text-base rounded-full;
  min-width: 96px;
}

.md-button--large .md-button__icon {
  @apply w-6 h-6;
}

.md-button--large .md-button__icon ::slotted(svg),
.md-button--large .md-button__icon ::slotted(img) {
  width: 20px;
  height: 20px;
}

/* Full Width */
.md-button--full-width {
  @apply w-full;
}

/* Has Icon at start - reduce left padding */
.md-button--has-icon:not(.md-button--icon-end).md-button--small {
  @apply pl-2;
}

.md-button--has-icon:not(.md-button--icon-end).md-button--medium {
  @apply pl-4;
}

.md-button--has-icon:not(.md-button--icon-end).md-button--large {
  @apply pl-6;
}

/* Has Icon at end - reduce right padding */
.md-button--icon-end.md-button--small {
  @apply pr-2;
}

.md-button--icon-end.md-button--medium {
  @apply pr-4;
}

.md-button--icon-end.md-button--large {
  @apply pr-6;
}

/* State Layer */
.md-button::before {
  @apply absolute inset-0 rounded-full;
  opacity: 0;
  transition: opacity var(--duration-short-2) var(--easing-standard);
  content: '';
}

.md-button:hover::before {
  opacity: var(--state-hover-opacity);
}

.md-button:focus-visible::before {
  opacity: var(--state-focus-opacity);
}

.md-button:active::before {
  opacity: var(--state-pressed-opacity);
}

/* ===========================================
   VARIANT STYLES
   =========================================== */

/* Filled Button */
.md-button--filled {
  background-color: var(--color-primary);
  color: var(--color-on-primary);
  box-shadow: var(--shadow-elevation-1);
}

.md-button--filled::before {
  background-color: var(--color-on-primary);
}

.md-button--filled:hover {
  box-shadow: var(--shadow-elevation-2);
}

.md-button--filled:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
  box-shadow: none;
}

/* Outlined Button */
.md-button--outlined {
  @apply bg-transparent;
  color: var(--color-primary);
  border: 1px solid var(--color-outline);
}

.md-button--outlined::before {
  background-color: var(--color-primary);
}

.md-button--outlined:disabled {
  border-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* Text Button */
.md-button--text {
  @apply bg-transparent;
  color: var(--color-primary);
  min-width: auto;
}

.md-button--text.md-button--small {
  @apply px-2;
}

.md-button--text.md-button--medium {
  @apply px-3;
}

.md-button--text.md-button--large {
  @apply px-4;
}

.md-button--text::before {
  background-color: var(--color-primary);
}

.md-button--text:disabled {
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* Elevated Button */
.md-button--elevated {
  background-color: var(--color-surface-container-low);
  color: var(--color-primary);
  box-shadow: var(--shadow-elevation-1);
}

.md-button--elevated::before {
  background-color: var(--color-primary);
}

.md-button--elevated:hover {
  box-shadow: var(--shadow-elevation-2);
}

.md-button--elevated:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
  box-shadow: none;
}

/* Tonal Button */
.md-button--tonal {
  background-color: var(--color-secondary-container);
  color: var(--color-on-secondary-container);
}

.md-button--tonal::before {
  background-color: var(--color-on-secondary-container);
}

.md-button--tonal:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* ===========================================
   ICON SLOT
   =========================================== */

.md-button__icon {
  @apply flex items-center justify-center flex-shrink-0;
}

.md-button__icon[hidden] {
  @apply hidden;
}

/* ===========================================
   BUTTON GROUP STYLES (MD3 Expressive)
   When md-button is used inside md-button-group
   =========================================== */

/* Base styles for buttons in a group */
.md-button--in-group {
  @apply bg-transparent;
  color: var(--color-on-surface);
  border: 1px solid var(--color-outline);
  min-width: auto;
  box-shadow: none;
}

.md-button--in-group::before {
  background-color: var(--color-on-surface);
}

/* ===========================================
   GROUP SIZE VARIANTS (MD3 Expressive)
   =========================================== */

/* XSmall: 32dp height */
.md-button--in-group.md-button--xsmall {
  @apply h-8 px-3 text-xs;
  --button-radius-full: var(--radius-lg);
}

.md-button--in-group.md-button--xsmall .md-button__icon {
  @apply w-4 h-4;
}

.md-button--in-group.md-button--xsmall.md-button--icon-only {
  @apply px-2;
}

/* Small: 36dp height */
.md-button--in-group.md-button--small {
  height: var(--size-button-height-sm);
  @apply px-3.5 text-xs;
  --button-radius-full: var(--radius-18);
}

.md-button--in-group.md-button--small .md-button__icon {
  @apply w-4 h-4;
}

.md-button--in-group.md-button--small.md-button--icon-only {
  padding: 0 10px;
}

/* Medium: 40dp height (default) */
.md-button--in-group.md-button--medium {
  @apply h-10 px-4 text-sm;
  --button-radius-full: var(--radius-20);
}

.md-button--in-group.md-button--medium .md-button__icon {
  width: var(--size-icon-sm);
  height: var(--size-icon-sm);
}

.md-button--in-group.md-button--medium.md-button--icon-only {
  @apply px-3;
}

/* Large: 48dp height */
.md-button--in-group.md-button--large {
  @apply h-12 px-5 text-base;
  --button-radius-full: var(--radius-24);
}

.md-button--in-group.md-button--large .md-button__icon {
  @apply w-5 h-5;
}

.md-button--in-group.md-button--large.md-button--icon-only {
  padding: 0 14px;
}

/* XLarge: 56dp height */
.md-button--in-group.md-button--xlarge {
  height: var(--size-button-height-xl);
  @apply px-6 text-lg;
  --button-radius-full: var(--radius-xl);
}

.md-button--in-group.md-button--xlarge .md-button__icon {
  @apply w-6 h-6;
}

.md-button--in-group.md-button--xlarge.md-button--icon-only {
  @apply px-4;
}

/* ===========================================
   POSITION-BASED SHAPES (Connected)
   MD3 Expressive: Selected always fully rounded
   Unselected: Position-based shapes
   =========================================== */

/* Leading button - rounded on left */
.md-button--in-group.md-button--leading {
  border-radius: var(--button-radius-full, var(--radius-20)) var(--radius-xs) var(--radius-xs) var(--button-radius-full, var(--radius-20));
}

/* Middle button - slight rounding */
.md-button--in-group.md-button--middle {
  border-radius: var(--radius-xs);
}

/* Trailing button - rounded on right */
.md-button--in-group.md-button--trailing {
  border-radius: var(--radius-xs) var(--button-radius-full, var(--radius-20)) var(--button-radius-full, var(--radius-20)) var(--radius-xs);
}

/* Standalone button - fully rounded */
.md-button--in-group.md-button--standalone {
  border-radius: var(--button-radius-full, var(--radius-20));
}

/* ===========================================
   SELECTED STATE
   MD3 Expressive: Selected buttons are always
   fully rounded regardless of position
   =========================================== */

.md-button--in-group.md-button--selected {
  background-color: var(--color-secondary-container);
  color: var(--color-on-secondary-container);
  border-radius: var(--button-radius-full, var(--radius-20));
}

.md-button--in-group.md-button--selected::before {
  background-color: var(--color-on-secondary-container);
}

/* ===========================================
   DISABLED STATE (in group)
   =========================================== */

.md-button--in-group:disabled {
  @apply cursor-not-allowed;
  opacity: var(--state-disabled-opacity);
  background-color: var(--color-surface-container-low);
  color: var(--color-on-surface);
}

/* ===========================================
   STATE LAYER (in group)
   =========================================== */

.md-button--in-group::before {
  border-radius: inherit;
}

/* ===========================================
   FOCUS STATE (in group)
   =========================================== */

.md-button--in-group:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  z-index: 2;
}
