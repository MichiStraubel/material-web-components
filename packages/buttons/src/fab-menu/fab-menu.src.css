@import "tailwindcss";
@import "../../../../packages/core/src/tokens/tokens.css";

/* ===========================================
   FAB MENU CONTAINER
   MD3 Expressive FAB Menu component
   =========================================== */

.md-fab-menu {
  @apply relative inline-flex flex-col items-center;
  --md-fab-menu-gap: 12px;
}

/* ===========================================
   TOGGLE FAB BUTTON
   Based on MD3 FAB specifications with icon morphing
   =========================================== */

.md-fab-menu__fab {
  @apply relative inline-flex items-center justify-center;
  @apply border-none outline-none cursor-pointer;
  transition: all var(--duration-medium-1) var(--easing-standard);
  font-family: var(--font-family-plain);
  z-index: 10;
}

.md-fab-menu__fab:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.md-fab-menu__fab:disabled {
  @apply cursor-not-allowed;
  opacity: var(--state-disabled-opacity);
  box-shadow: none;
}

/* ===========================================
   FAB SIZE VARIANTS
   Small: 40dp, Medium: 56dp, Large: 96dp
   =========================================== */

.md-fab-menu__fab--small {
  @apply h-10 w-10;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-elevation-3);
}

.md-fab-menu__fab--small .md-fab-menu__icon {
  @apply w-6 h-6;
  font-size: 24px;
}

.md-fab-menu__fab--medium {
  @apply h-14 w-14;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-elevation-3);
}

.md-fab-menu__fab--medium .md-fab-menu__icon {
  @apply w-6 h-6;
  font-size: 24px;
}

.md-fab-menu__fab--large {
  @apply h-24 w-24;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-elevation-3);
}

.md-fab-menu__fab--large .md-fab-menu__icon {
  @apply w-9 h-9;
  font-size: 36px;
}

/* Lowered Elevation */
.md-fab-menu__fab--lowered {
  box-shadow: var(--shadow-elevation-1);
}

.md-fab-menu__fab--lowered:hover {
  box-shadow: var(--shadow-elevation-2);
}

/* ===========================================
   STATE LAYER
   =========================================== */

.md-fab-menu__fab::before {
  @apply absolute inset-0;
  border-radius: inherit;
  opacity: 0;
  transition: opacity var(--duration-short-2) var(--easing-standard);
  content: '';
}

.md-fab-menu__fab:hover {
  box-shadow: var(--shadow-elevation-4);
}

.md-fab-menu__fab:hover::before {
  opacity: var(--state-hover-opacity);
}

.md-fab-menu__fab:focus-visible::before {
  opacity: var(--state-focus-opacity);
}

.md-fab-menu__fab:active::before {
  opacity: var(--state-pressed-opacity);
}

/* ===========================================
   FAB VARIANT STYLES
   =========================================== */

/* Surface FAB */
.md-fab-menu__fab--surface {
  background-color: var(--color-surface-container-high);
  color: var(--color-primary);
}

.md-fab-menu__fab--surface::before {
  background-color: var(--color-primary);
}

/* Primary FAB */
.md-fab-menu__fab--primary {
  background-color: var(--color-primary-container);
  color: var(--color-on-primary-container);
}

.md-fab-menu__fab--primary::before {
  background-color: var(--color-on-primary-container);
}

/* Secondary FAB */
.md-fab-menu__fab--secondary {
  background-color: var(--color-secondary-container);
  color: var(--color-on-secondary-container);
}

.md-fab-menu__fab--secondary::before {
  background-color: var(--color-on-secondary-container);
}

/* Tertiary FAB */
.md-fab-menu__fab--tertiary {
  background-color: var(--color-tertiary-container);
  color: var(--color-on-tertiary-container);
}

.md-fab-menu__fab--tertiary::before {
  background-color: var(--color-on-tertiary-container);
}

/* ===========================================
   FAB ICON WITH MORPHING ANIMATION
   + icon transforms to × when expanded
   =========================================== */

.md-fab-menu__icon {
  @apply flex items-center justify-center relative z-10;
}

.md-fab-menu__icon[hidden] {
  @apply hidden;
}

.md-fab-menu__icon-default {
  @apply relative;
  font-family: 'Material Symbols Outlined';
  font-weight: normal;
  font-style: normal;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: 'liga';
}

.md-fab-menu__icon-add,
.md-fab-menu__icon-close {
  @apply absolute;
  transition:
    opacity var(--duration-short-2) var(--easing-standard),
    transform var(--duration-medium-1) var(--easing-emphasized);
}

.md-fab-menu__icon-add {
  opacity: 1;
  transform: rotate(0deg);
}

.md-fab-menu__icon-close {
  opacity: 0;
  transform: rotate(-90deg);
}

/* Expanded state - morph + to × */
.md-fab-menu__fab--expanded .md-fab-menu__icon-add {
  opacity: 0;
  transform: rotate(90deg);
}

.md-fab-menu__fab--expanded .md-fab-menu__icon-close {
  opacity: 1;
  transform: rotate(0deg);
}

/* Custom icon slot */
.md-fab-menu__icon--custom ::slotted(svg),
.md-fab-menu__icon--custom ::slotted(img) {
  width: 100%;
  height: 100%;
}

/* ===========================================
   MENU CONTAINER
   Positioned above the FAB with staggered animation
   =========================================== */

.md-fab-menu__menu {
  @apply absolute flex flex-col gap-3;
  bottom: calc(100% + var(--md-fab-menu-gap));
  padding: 8px 0;
  pointer-events: none;
  z-index: 5;
}

.md-fab-menu__menu--open {
  pointer-events: auto;
}

/* Menu Alignment */
.md-fab-menu__menu--start {
  @apply items-start;
  left: 0;
}

.md-fab-menu__menu--center {
  @apply items-center;
  left: 50%;
  transform: translateX(-50%);
}

.md-fab-menu__menu--end {
  @apply items-end;
  right: 0;
}

/* ===========================================
   MENU ITEMS (via ::slotted)
   Styled through the md-fab-menu-item component
   =========================================== */

.md-fab-menu__menu ::slotted(md-fab-menu-item) {
  opacity: 0;
  transform: translateY(20px) scale(0.8);
  transition:
    opacity var(--duration-short-2) var(--easing-standard),
    transform var(--duration-medium-1) var(--easing-emphasized);
  /* Stagger delay based on item index (set via JS) */
  transition-delay: calc(var(--item-index, 0) * 50ms);
}

.md-fab-menu__menu--open ::slotted(md-fab-menu-item) {
  opacity: 1;
  transform: translateY(0) scale(1);
}
