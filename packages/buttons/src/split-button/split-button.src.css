@import "tailwindcss";
@import "../../../../packages/core/src/tokens/tokens.css";

/* ===========================================
   SPLIT BUTTON CONTAINER
   MD3 Spec: Two connected buttons with spacing
   =========================================== */

.md-split-button-container {
  @apply relative inline-block;
}

.md-split-button {
  @apply inline-flex items-stretch;
  gap: 2px;
}

/* ===========================================
   DROPDOWN MENU
   =========================================== */

.md-split-button__menu {
  @apply absolute opacity-0 invisible;
  top: 100%;
  right: 0;
  margin-top: 4px;
  min-width: 112px;
  max-width: 280px;
  padding: 8px 0;
  background-color: var(--color-surface-container);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-elevation-2);
  z-index: 1000;
  transform: scaleY(0.8);
  transform-origin: top right;
  transition:
    opacity var(--duration-short-2) var(--easing-standard),
    transform var(--duration-short-2) var(--easing-standard),
    visibility var(--duration-short-2);
}

.md-split-button__menu--open {
  @apply opacity-100 visible;
  transform: scaleY(1);
}

/* Menu items styling via ::slotted */
.md-split-button__menu ::slotted(*) {
  @apply flex items-center w-full text-left;
  gap: 12px;
  padding: 12px 16px;
  font-family: var(--font-family-plain);
  font-size: 14px;
  color: var(--color-on-surface);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color var(--duration-short-2) var(--easing-standard);
}

.md-split-button__menu ::slotted(*:hover) {
  background-color: color-mix(in srgb, var(--color-on-surface) 8%, transparent);
}

.md-split-button__menu ::slotted(*:focus) {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  outline: none;
}

/* ===========================================
   SIZE VARIANTS
   MD3 Expressive sizes:
   - XSmall: 32dp
   - Small: 36dp (default)
   - Medium: 40dp
   - Large: 48dp
   - XLarge: 56dp
   =========================================== */

/* XSmall: 32dp */
.md-split-button--xsmall {
  --split-button-height: 32px;
  --split-button-radius: 16px;
  --split-button-padding: 12px;
  --split-button-icon-padding: 8px;
  --split-button-icon-size: 16px;
  --split-button-font-size: 12px;
}

/* Small: 36dp */
.md-split-button--small {
  --split-button-height: 36px;
  --split-button-radius: 18px;
  --split-button-padding: 14px;
  --split-button-icon-padding: 10px;
  --split-button-icon-size: 18px;
  --split-button-font-size: 12px;
}

/* Medium: 40dp (default) */
.md-split-button--medium {
  --split-button-height: 40px;
  --split-button-radius: 20px;
  --split-button-padding: 16px;
  --split-button-icon-padding: 12px;
  --split-button-icon-size: 18px;
  --split-button-font-size: 14px;
}

/* Large: 48dp */
.md-split-button--large {
  --split-button-height: 48px;
  --split-button-radius: 24px;
  --split-button-padding: 20px;
  --split-button-icon-padding: 14px;
  --split-button-icon-size: 20px;
  --split-button-font-size: 14px;
}

/* XLarge: 56dp */
.md-split-button--xlarge {
  --split-button-height: 56px;
  --split-button-radius: 28px;
  --split-button-padding: 24px;
  --split-button-icon-padding: 16px;
  --split-button-icon-size: 24px;
  --split-button-font-size: 16px;
}

/* ===========================================
   LEADING BUTTON (Primary Action)
   =========================================== */

.md-split-button__leading {
  @apply relative inline-flex items-center justify-center gap-2;
  @apply border-none outline-none cursor-pointer;
  height: var(--split-button-height);
  padding: 0 var(--split-button-padding);
  font-size: var(--split-button-font-size);
  font-family: var(--font-family-plain);
  font-weight: 500;
  border-radius: var(--split-button-radius) 4px 4px var(--split-button-radius);
  transition: all var(--duration-medium-1) var(--easing-standard);
}

.md-split-button__leading--has-icon {
  padding-left: var(--split-button-icon-padding);
}

.md-split-button__leading:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  z-index: 1;
}

.md-split-button__leading:disabled {
  @apply cursor-not-allowed;
  opacity: var(--state-disabled-opacity);
}

/* State Layer for Leading */
.md-split-button__leading::before {
  @apply absolute inset-0;
  border-radius: inherit;
  opacity: 0;
  transition: opacity var(--duration-short-2) var(--easing-standard);
  content: '';
}

.md-split-button__leading:hover::before {
  opacity: var(--state-hover-opacity);
}

.md-split-button__leading:focus-visible::before {
  opacity: var(--state-focus-opacity);
}

.md-split-button__leading:active::before {
  opacity: var(--state-pressed-opacity);
}

/* ===========================================
   TRAILING BUTTON (Secondary Action)
   =========================================== */

.md-split-button__trailing {
  @apply relative inline-flex items-center justify-center;
  @apply border-none outline-none cursor-pointer;
  height: var(--split-button-height);
  padding: 0 var(--split-button-icon-padding);
  font-family: var(--font-family-plain);
  border-radius: 4px var(--split-button-radius) var(--split-button-radius) 4px;
  transition: all var(--duration-medium-1) var(--easing-standard);
}

.md-split-button__trailing:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  z-index: 1;
}

.md-split-button__trailing:disabled {
  @apply cursor-not-allowed;
  opacity: var(--state-disabled-opacity);
}

/* State Layer for Trailing */
.md-split-button__trailing::before {
  @apply absolute inset-0;
  border-radius: inherit;
  opacity: 0;
  transition: opacity var(--duration-short-2) var(--easing-standard);
  content: '';
}

.md-split-button__trailing:hover::before {
  opacity: var(--state-hover-opacity);
}

.md-split-button__trailing:focus-visible::before {
  opacity: var(--state-focus-opacity);
}

.md-split-button__trailing:active::before {
  opacity: var(--state-pressed-opacity);
}

/* Expanded state - rotate arrow and make circular */
.md-split-button__trailing--expanded {
  border-radius: var(--split-button-radius) !important;
}

.md-split-button__trailing--expanded .md-split-button__trailing-icon {
  transform: rotate(180deg);
}

/* ===========================================
   VARIANT STYLES
   =========================================== */

/* Filled Variant */
.md-split-button--filled {
  background-color: var(--color-primary);
  color: var(--color-on-primary);
}

.md-split-button--filled::before {
  background-color: var(--color-on-primary);
}

.md-split-button--filled:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* Tonal Variant */
.md-split-button--tonal {
  background-color: var(--color-secondary-container);
  color: var(--color-on-secondary-container);
}

.md-split-button--tonal::before {
  background-color: var(--color-on-secondary-container);
}

.md-split-button--tonal:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* Outlined Variant */
.md-split-button--outlined {
  background-color: transparent;
  color: var(--color-primary);
  border: 1px solid var(--color-outline);
}

.md-split-button--outlined::before {
  background-color: var(--color-primary);
}

.md-split-button--outlined:disabled {
  border-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
}

/* Outlined border adjustments for connected buttons */
.md-split-button__leading.md-split-button--outlined {
  border-right-width: 0.5px;
}

.md-split-button__trailing.md-split-button--outlined {
  border-left-width: 0.5px;
}

/* Elevated Variant */
.md-split-button--elevated {
  background-color: var(--color-surface-container-low);
  color: var(--color-primary);
  box-shadow: var(--shadow-elevation-1);
}

.md-split-button--elevated::before {
  background-color: var(--color-primary);
}

.md-split-button--elevated:hover {
  box-shadow: var(--shadow-elevation-2);
}

.md-split-button--elevated:disabled {
  background-color: color-mix(in srgb, var(--color-on-surface) 12%, transparent);
  color: color-mix(in srgb, var(--color-on-surface) 38%, transparent);
  box-shadow: none;
}

/* ===========================================
   ICON STYLES
   =========================================== */

.md-split-button__leading-icon {
  @apply flex items-center justify-center flex-shrink-0 relative z-10;
  width: var(--split-button-icon-size);
  height: var(--split-button-icon-size);
}

.md-split-button__leading-icon[hidden] {
  @apply hidden;
}

.md-split-button__leading-icon ::slotted(svg),
.md-split-button__leading-icon ::slotted(img) {
  width: var(--split-button-icon-size);
  height: var(--split-button-icon-size);
}

.md-split-button__trailing-icon {
  @apply flex items-center justify-center relative z-10;
  width: var(--split-button-icon-size);
  height: var(--split-button-icon-size);
  transition: transform var(--duration-short-2) var(--easing-standard);
}

.md-split-button__trailing-icon ::slotted(svg),
.md-split-button__trailing-icon ::slotted(img) {
  width: var(--split-button-icon-size);
  height: var(--split-button-icon-size);
}

.md-split-button__default-icon {
  font-family: 'Material Symbols Outlined';
  font-weight: normal;
  font-style: normal;
  font-size: var(--split-button-icon-size);
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: 'liga';
}

/* ===========================================
   LABEL
   =========================================== */

.md-split-button__label {
  @apply relative z-10;
  white-space: nowrap;
}
